{"ast":null,"code":"/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar MIME_MAP = [{\n  type: 'text/plain',\n  ext: 'txt'\n}, {\n  type: 'text/html',\n  ext: 'html'\n}, {\n  type: 'text/javascript',\n  ext: 'js'\n}, {\n  type: 'text/css',\n  ext: 'css'\n}, {\n  type: 'text/csv',\n  ext: 'csv'\n}, {\n  type: 'text/yaml',\n  ext: 'yml'\n}, {\n  type: 'text/yaml',\n  ext: 'yaml'\n}, {\n  type: 'text/calendar',\n  ext: 'ics'\n}, {\n  type: 'text/calendar',\n  ext: 'ical'\n}, {\n  type: 'image/png',\n  ext: 'png'\n}, {\n  type: 'image/gif',\n  ext: 'gif'\n}, {\n  type: 'image/jpeg',\n  ext: 'jpg'\n}, {\n  type: 'image/jpeg',\n  ext: 'jpeg'\n}, {\n  type: 'image/bmp',\n  ext: 'bmp'\n}, {\n  type: 'image/x-icon',\n  ext: 'ico'\n}, {\n  type: 'image/tiff',\n  ext: 'tif'\n}, {\n  type: 'image/tiff',\n  ext: 'tiff'\n}, {\n  type: 'image/svg+xml',\n  ext: 'svg'\n}, {\n  type: 'application/json',\n  ext: 'json'\n}, {\n  type: 'application/xml',\n  ext: 'xml'\n}, {\n  type: 'application/x-sh',\n  ext: 'sh'\n}, {\n  type: 'application/zip',\n  ext: 'zip'\n}, {\n  type: 'application/x-rar-compressed',\n  ext: 'rar'\n}, {\n  type: 'application/x-tar',\n  ext: 'tar'\n}, {\n  type: 'application/x-bzip',\n  ext: 'bz'\n}, {\n  type: 'application/x-bzip2',\n  ext: 'bz2'\n}, {\n  type: 'application/pdf',\n  ext: 'pdf'\n}, {\n  type: 'application/java-archive',\n  ext: 'jar'\n}, {\n  type: 'application/msword',\n  ext: 'doc'\n}, {\n  type: 'application/vnd.ms-excel',\n  ext: 'xls'\n}, {\n  type: 'application/vnd.ms-excel',\n  ext: 'xlsx'\n}, {\n  type: 'message/rfc822',\n  ext: 'eml'\n}];\n\nvar JS =\n/** @class */\nfunction () {\n  function JS() {}\n\n  JS.isEmpty = function (obj) {\n    return Object.keys(obj).length === 0;\n  };\n\n  JS.sortByField = function (list, field, dir) {\n    if (!list || !list.sort) {\n      return false;\n    }\n\n    var dirX = dir && dir === 'desc' ? -1 : 1;\n    list.sort(function (a, b) {\n      var a_val = a[field];\n      var b_val = b[field];\n\n      if (typeof b_val === 'undefined') {\n        return typeof a_val === 'undefined' ? 0 : 1 * dirX;\n      }\n\n      if (typeof a_val === 'undefined') {\n        return -1 * dirX;\n      }\n\n      if (a_val < b_val) {\n        return -1 * dirX;\n      }\n\n      if (a_val > b_val) {\n        return 1 * dirX;\n      }\n\n      return 0;\n    });\n    return true;\n  };\n\n  JS.objectLessAttributes = function (obj, less) {\n    var ret = Object.assign({}, obj);\n\n    if (less) {\n      if (typeof less === 'string') {\n        delete ret[less];\n      } else {\n        less.forEach(function (attr) {\n          delete ret[attr];\n        });\n      }\n    }\n\n    return ret;\n  };\n\n  JS.filenameToContentType = function (filename, defVal) {\n    if (defVal === void 0) {\n      defVal = 'application/octet-stream';\n    }\n\n    var name = filename.toLowerCase();\n    var filtered = MIME_MAP.filter(function (mime) {\n      return name.endsWith('.' + mime.ext);\n    });\n    return filtered.length > 0 ? filtered[0].type : defVal;\n  };\n\n  JS.isTextFile = function (contentType) {\n    var type = contentType.toLowerCase();\n\n    if (type.startsWith('text/')) {\n      return true;\n    }\n\n    return 'application/json' === type || 'application/xml' === type || 'application/sh' === type;\n  };\n  /**\n   * generate random string\n   */\n\n\n  JS.generateRandomString = function () {\n    var result = '';\n    var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n    for (var i = 32; i > 0; i -= 1) {\n      result += chars[Math.floor(Math.random() * chars.length)];\n    }\n\n    return result;\n  };\n\n  JS.makeQuerablePromise = function (promise) {\n    if (promise.isResolved) return promise;\n    var isPending = true;\n    var isRejected = false;\n    var isFullfilled = false;\n    var result = promise.then(function (data) {\n      isFullfilled = true;\n      isPending = false;\n      return data;\n    }, function (e) {\n      isRejected = true;\n      isPending = false;\n      throw e;\n    });\n\n    result.isFullfilled = function () {\n      return isFullfilled;\n    };\n\n    result.isPending = function () {\n      return isPending;\n    };\n\n    result.isRejected = function () {\n      return isRejected;\n    };\n\n    return result;\n  };\n\n  JS.browserOrNode = function () {\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    var isNode = typeof process !== 'undefined' && process.versions != null && process.versions.node != null;\n    return {\n      isBrowser: isBrowser,\n      isNode: isNode\n    };\n  };\n  /**\n   * transfer the first letter of the keys to lowercase\n   * @param {Object} obj - the object need to be transferred\n   * @param {Array} whiteListForItself - whitelist itself from being transferred\n   * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\n   */\n\n\n  JS.transferKeyToLowerCase = function (obj, whiteListForItself, whiteListForChildren) {\n    if (whiteListForItself === void 0) {\n      whiteListForItself = [];\n    }\n\n    if (whiteListForChildren === void 0) {\n      whiteListForChildren = [];\n    }\n\n    if (!JS.isStrictObject(obj)) return obj;\n    var ret = {};\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        var transferedKey = whiteListForItself.includes(key) ? key : key[0].toLowerCase() + key.slice(1);\n        ret[transferedKey] = whiteListForChildren.includes(key) ? obj[key] : JS.transferKeyToLowerCase(obj[key], whiteListForItself, whiteListForChildren);\n      }\n    }\n\n    return ret;\n  };\n  /**\n   * transfer the first letter of the keys to lowercase\n   * @param {Object} obj - the object need to be transferred\n   * @param {Array} whiteListForItself - whitelist itself from being transferred\n   * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\n   */\n\n\n  JS.transferKeyToUpperCase = function (obj, whiteListForItself, whiteListForChildren) {\n    if (whiteListForItself === void 0) {\n      whiteListForItself = [];\n    }\n\n    if (whiteListForChildren === void 0) {\n      whiteListForChildren = [];\n    }\n\n    if (!JS.isStrictObject(obj)) return obj;\n    var ret = {};\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        var transferedKey = whiteListForItself.includes(key) ? key : key[0].toUpperCase() + key.slice(1);\n        ret[transferedKey] = whiteListForChildren.includes(key) ? obj[key] : JS.transferKeyToUpperCase(obj[key], whiteListForItself, whiteListForChildren);\n      }\n    }\n\n    return ret;\n  };\n  /**\n   * Return true if the object is a strict object\n   * which means it's not Array, Function, Number, String, Boolean or Null\n   * @param obj the Object\n   */\n\n\n  JS.isStrictObject = function (obj) {\n    return obj instanceof Object && !(obj instanceof Array) && !(obj instanceof Function) && !(obj instanceof Number) && !(obj instanceof String) && !(obj instanceof Boolean);\n  };\n\n  return JS;\n}();\n\nexport default JS;","map":{"version":3,"mappings":"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","names":["MIME_MAP","type","ext","JS","obj","Object","keys","length","list","field","dir","sort","dirX","a","b","a_val","b_val","less","ret","assign","forEach","attr","filename","defVal","name","toLowerCase","filtered","filter","endsWith","mime","contentType","startsWith","result","chars","i","Math","floor","random","promise","isResolved","isPending","isRejected","isFullfilled","then","data","e","isBrowser","window","document","isNode","process","versions","node","whiteListForItself","whiteListForChildren","isStrictObject","key","hasOwnProperty","transferedKey","includes","slice","transferKeyToLowerCase","toUpperCase","transferKeyToUpperCase","Array","Function","Number","String","Boolean"],"sourceRoot":"","sources":["../src/JS.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}